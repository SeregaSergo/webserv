error_log /Users/suzumaki/Desktop/webserv/www/logs/error.log;

idle_timeout 5;
keepalive_timeout 30;
tcp_keepalive_time 300;
tcp_keepalive_probes 3;
tcp_keepalive_intvl 20;

limit_uri_length  1024;
limit_request_entity 4096;

types {
    text/html                             html htm shtml;
    text/css                              css;
    image/gif                             gif;
    image/jpeg                            jpeg jpg;
    application/x-x509-ca-cert            der pem crt;
    application/zip                       zip;
    application/octet-stream              deb bin exe dll dmg eot iso img;
    audio/mpeg                            mp3;
    video/mpeg                            mpeg mpg mov avi;
};


server {
    server_name suzumaki.org www.suzumaki.org;
    listen 127.0.0.1:8080;
    access_log  /Users/suzumaki/Desktop/webserv/www/logs/suzumaki.log;
    client_max_body_size 5M;
    root /Users/suzumaki/Desktop/webserv/www/;
    error_page 500 502 503 504 /500.html;
    error_page 404 /404.html;
    
    autoindex on;
    location / {
        autoindex on;
        #index     dddupload_form.html dadaindex.html adadwindex.php;
        allowed_methods   GET;
    };

    location /images/ {
        autoindex on;
        root /Users/suzumaki/Desktop/webserv/www/static/;
        allowed_methods   GET;
    };

    location /storage/ {
        root              /Users/suzumaki/Desktop/webserv/www/users_files;
        allowed_methods   GET;
        autoindex         on;
    };

    location /upload/ {
        root              /Users/suzumaki/Desktop/webserv/www/users_files;
        allowed_methods   POST DELETE;
        autoindex on;
    };

    location = /index.php {
        autoindex on;
        allowed_methods   GET;
    };

    location ~ py/php {
        autoindex on;
        root /Users/suzumaki/Desktop/webserv/www/cgi-bin_mac/;
        cgi_enabled;
        cgi_timeout  5;
    };

    location ~ html {
        autoindex on;
        root /Users/suzumaki/Desktop/webserv/www/static/;
    };

    location ~ pdf {
        autoindex on;
        root /Users/suzumaki/Desktop/webserv/www/documents/;
        allowed_methods   GET;
    };
};

server {

  listen 127.0.0.1:8080;
  server_name suzumaki.ru www.suzumaki.ru;
  access_log  /Users/suzumaki/Desktop/webserv/www/logs/suzumaki.log;

  location / {
        autoindex on;
        redirect 301 http://www.cplusplus.com/info/description$uri;
  };
};
